<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:og="http://ogp.me/ns#"
xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
<title>从零开始学scala - 柏舟志 askender's blog</title>
<!-- Using the latest rendering mode for IE -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Open Graph tags -->
<meta property="og:type" content="article"/>
<meta property="og:title" content="从零开始学scala"/>
<meta property="og:url" content="/blog/learn_scala_from_zero.html"/>
<meta property="og:description" content=""/>

<!-- Bootstrap -->
<link rel="stylesheet" href="/blog/theme/css/bootstrap.min.css" type="text/css"/>
<link href="/blog/theme/css/font-awesome.min.css" rel="stylesheet">
<link href="/blog/theme/css/pygments.css" rel="stylesheet">
<link rel="stylesheet" href="/blog/theme/css/style.css" type="text/css"/>

</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/blog" class="navbar-brand">柏舟志 askender's blog</a>
</div>
<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="/blog/pages/about.html">about</a>
</li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<a href="/blog/archives.html"> <i class="icon-th-list"></i>
Archives
</a>
</li>
</ul>
</div>
<!-- /.navbar-collapse --> </div>
</nav>
<!-- /.navbar -->
<div class="container">
<div class="row">
<div class="col-lg-9">
<section id="content">
    <article>
        <header class="page-header">
            <h1>
                <a href="/blog/learn_scala_from_zero.html"
                       rel="bookmark"
                       title="Permalink to 从零开始学scala">从零开始学scala</a>
            </h1>
        </header>
        <div class="entry-content">
            <div class="panel">
                <div class="panel-body"><footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published"> <i class="icon-calendar"></i>
        二 01 一月 1980
    </span>
                    
            
    
    <span class="label label-default">Tags</span>
<a href="/blog/tag/study.html">study</a>
        /
    <a href="/blog/tag/coding.html">coding</a>
    </footer>
<!-- /.post-info --></div>
            </div>
            <p>接触过各种编程语言，c, php，python, nodejs，java，go，lisp，其实都只会一点皮毛。一直认为语言得于具体的使用需求联系才能产生作用。
公司技术选型选定scala，现在学习新的语言scala，希望能更深入些。</p>
<p>先从一份中文资料看起
<a href="http://qiujj.com/static/Scala-Handbook.htm">http://qiujj.com/static/Scala-Handbook.htm</a></p>
<ul>
<li>以下是一些摘录，//后面是吐槽</li>
<li>“和别人分享你的知识，那才是永恒之道”——somebody</li>
<li>Scala很好玩很有趣 //真是这样的话，我喜欢</li>
<li>语言特色能够塑造编程者的思维： C++也能使用抽象基类设计多重继承，但Java的接口引导你走得更远；Java也能设计类型安全的静态方法(final static)，但Scala鼓励你这样做并逐步从OOP到达FP的彼岸，而且来去自如</li>
<li>我们可以很容易地把过程语言、面向对象语言、函数式语言中的代码“翻译”成Scala代码。试想如果我们要把Haskell或者Lisp的某个尾递归算法翻译成Java代码，还得多花点时间；而要把C++的代码翻译成Hashkell，同样也不简单。Scala的混血性给我们的实际使用提供了便利。</li>
<li>适当地选用OOP或者FP，能够使表达相对另一种更加清晰准确</li>
<li>不用象动态语言那样测试代码比业务代码还多 //我目前的几个python小项目中测试代码很少，确实有很多运行中才发现的bug</li>
<li>Scala虽然是一门彻头彻底的静态语言，但又具备了现代动态语言的很多方便和灵活 //really?</li>
<li>Put productivity &amp; creativity back in the hands of developers。其实不仅限于Scala，对于所有的编程语言来说，一门语言是否“好玩”有趣，能否激起创作欲，才是最关键的，这比语言风格、运行速度、工具支持、社区文化都来得重要。</li>
<li>val 不可变，相当于const/final，但如果val为数组或者List，val的元素可以赋值</li>
<li>val (x,y) = (10, "hello") //like python</li>
<li>向函数式风格推进的一个方式，就是尝试不用任何var来定义变量</li>
<li>val regex = "(\d+)/(\d+)/(\d+)".r</li>
<li>val regex(year, month, day) = "2010/1/13"</li>
<li>val f1 = System.currentTimeMillis //better, no need to import time</li>
<li>lazy val f2 = System.currentTimeMillis</li>
<li>尽量使用大写形式： Int, Long, Double, Byte, Short, Char, Float, Double, Boolean. 编译时Scala自动对应到Java原始类型，提高运行效率。Unit对应java的void</li>
<li>def i = 10.asInstanceOf[Double]</li>
<li>List('A','B','C').map(c=&gt;(c+32).asInstanceOf[Char])</li>
<li>val b = 10.isInstanceOf[Int]</li>
<li>而在match ... case 中可以直接判断而不用此方法 //? 等后文</li>
<li>用Any统一了原生类型和引用类型 //不错</li>
<li>-3.abs // 3 **</li>
<li>-3 max -2 // -2</li>
<li>-3 min -2 // -3</li>
<li>1.4.round // 1 四舍五入 **</li>
<li>1.1.ceil // 2.0 天花板 **</li>
<li>1.1.floor // 1.0 地板 **</li>
<li>def abs(n: Int): Int = if (n &gt; 0) n else -n </li>
<li>def even(n:Int) = 0==(n &amp; 1)</li>
<li>def odd(n:Int) = !even(n)</li>
<li>BigInt("10000000000000000000000000")</li>
<li>"jamesqiu".max // **</li>
<li>('a' to 'f') map (_.toString*3)</li>
<li>"12345" map (_.toInt) // **</li>
<li>def  fac(n:Int):BigInt = if (n==0) 1 else fac(n-1)*n</li>
<li>fac(1000)</li>
<li>println("""|Welcome to Ultamix 3000.  </li>
<li>|Type "HELP" for help.""".stripMargin)</li>
<li>"abc" * 0 // ""</li>
<li>
<p>"abc"+"abcww"</p>
<p>"abc" * 0 // ""
"abc"+"abcww"</p>
</li>
</ul>
<p>"google".reverse
"Hello" map (<em>.toUpper) // 相当于 "Hello".toUpperCase
"hello"=="Hello".toLowerCase()
"101".toInt
List("1","2","3") map (</em>.toInt)
List("1","2","3") map Integer.parseInt</p>
<p>val msg = java.text.MessageFormat.format(
    "At {1,time} on {1,date}, there was {2} on planet {0}.",
    "Hoth", new java.util.Date(), "a disturbance in the Force")</p>
<p>"my name is %s, age is %d." format ("james", 30)
"%s-%d：%1$s is %2$d." format ("james", 30)</p>
<p>// Null
// Trait，其唯一实例为null，是AnyRef的子类，<em>不是</em> AnyVal的子类
// Nothing
// Trait，所有类型（包括AnyRef和AnyVal）的子类，没有实例
// None
// Option的两个子类之一，另一个是Some，用于安全的函数返回值
// Unit
// 无返回值的函数的类型，和java的void对应
// Nil
// 长度为0的List</p>
<p>val s1,s2 = "hello"
val s3 = new String("hello")
s1==s3 // true 值相同
s1 eq s3 // false 不是同一个引用</p>
<p>def p(map:Map[Int,Int]) = println(map get 3 getOrElse "...")
p(Map(1-&gt;100,2-&gt;200)) // ...
p(Map(1-&gt;100,3-&gt;300)) // 300</p>
<p>def f(v:Any) = v match {
    case null =&gt; "null"
    case i:Int =&gt; i*100
    case s:String =&gt; s
    case _ =&gt; "others"
}</p>
<p>def fac(n:Int) = ((1:BigInt) to n).product
def f(n:Int) = { require(n!=0, "n can't be zero"); 1.0/n }</p>
<p>1 to 11 by 2
(1 to 3) forall (0&lt;)
def f(n:Int) = { require(n!=0, "n can't be zero"); 1.0/n }
更scalable的写法：
def sum(L: Seq[Int]) = L.foldLeft(0)(<em> + </em>)
def sum(L: List[Int]) = (0/:L){<em> + </em>}
def multiply(L: Seq[Int]) = L.foldLeft(1)(<em> * </em>)
// def multiply(L: List[Int]) = (1/:L){<em> * </em>}
multiply(Seq(1,2,3,4,5)) // 120
multiply(1 until 5+1) // 120
List(1,2,3,4,5).scanLeft(0)(<em>+</em>)
1 to 10 by 2 take 3 // Range(1, 3, 5)
1 to 10 by 2 drop 3 // Range(7, 9)
1 to 10 by 2 splitAt 2 // (Range(1, 3),Range(5, 7, 9))</p>
<p>range(1,10,2)[::2]</p>
<p>1 to 10 takeWhile (n=&gt;n<em>n&lt;25) // (1, 2, 3, 4)
1 to 10 dropWhile (n=&gt;n</em>n&lt;25) // (5,6,7,8,9,10)
List(1,0,1,0) span (<em>&gt;0) // ((1), (0,1,0))
List(1,0,1,0) partition (</em>&gt;0) // ((1,1),(0,0))</p>
<p>('a' to 'z').slice(0,10).foreach(println)
type JDate = java.util.Date
// 函数中的泛型
def foo<a href="a:T">T</a> = println("value is " + a)
List(1.0, 3, 6.2, 2.3, 0).sortWith(<em>&lt;</em>)
@specialized  // ?
Curry化 // ?
tail-recursive会被优化成循环，所以没有堆栈溢出的问题
协变和逆变(co-|contra-)variance // ?
元素合并进List用::
val list2 = "a"::"b"::"c"::Nil // Nil是必须的
val list3 = list2 ++ list1
IndexSeq的缺省实现是Vector:
IndexSeq(1,2,3) // Vector(1, 2, 3)
('0' to '9') ++ ('A' to 'Z')
(1 to 5).toList
def fib(a: Int, b: Int): Stream[Int] = a #:: fib(b,  a+b)
val fibs = fib(1, 1).take(7).toList // List(1, 1, 2, 3, 5, 8, 13)
Stream.range(1,50000000).filter(<em>%13==0)(1) // 26
val ms = collection.mutable.Stack()
ms.push(1,3,5).push(7) // Stack(7, 5, 3, 1)
ms.head // 7
ms.pop // 7, ms = Stack(5,3,1)
val mq = collection.mutable.Queue<a href="">Int</a>
mq += (1,3,5)
mq ++= List(7,9) // Queue(1, 3, 5, 7, 9)
mq dequeue // 1, mq= Queue(3, 5, 7, 9)
mq clear // Queue()
List("a","b","c").map(s=&gt; s.toUpperCase()) // 方式1
List("a","b","c").map(</em>.toUpperCase())     // 方式2, 类似于Groovy的it
List(1,3,5,7,9) splitAt 2 // (List(1, 3),List(5, 7, 9))
List(1,3,5,7,9) groupBy (5&lt;) // Map((true,List(7, 9)), (false,List(1, 3, 5)))
List(1,2,3,4,5).exists(<em>%3==0) // true
List(1,3,2,0,5,9,7).sorted //  List(0, 1, 2, 3, 5, 7, 9)
List(1,3,2,0,5,9,7).sortWith(</em>&gt;<em>) // List(9, 7, 5, 3, 2, 1, 0)
List("abc", "cb", "defe", "z").sortBy(</em>.size) // List(z, cb, abc, defe)
List((1,'c'), (1,'b'), (2,'a')) .sortBy(<em>._2) // List((2,a), (1,b), (1,c))
def uniq<a href="l:List[T]">T</a> = l.distinct
val a = List(100,200,300)
a.indices // (0,1,2)
a.zipWithIndex // ((100,0), (200,1), (300,2))
(a.indices) zip a // ((0,100), (1,200), (2,300))
List(100,200,300,400,500) slice (2,4)
val v1 = List(1,2,3,4)
v1.updated(3,10) // List(1, 2, 3, 10), v1还是List(1, 2, 3, 4)
1 to 5 contains 3 // true, 后一个参数是1个元素
1 to 5 containsSlice (2 to 4) // true, 后一个参数是1个集合
(1 to 5) startsWith (1 to 3) // true 后一个参数是1个集合
(1 to 5) endsWith (4 to 5)
(List(1,2,3) corresponds List(4,5,6)) (</em>&lt;_) // true，长度相同且每个对应项符合判断条件
List(1,2,3,4) intersect List(4,3,6) // 交集 = List(3, 4)
List(1,2,3,4) diff List(4,3,6) // A-B = List(1, 2)
List(1,2,3,4) union List(4,3,6) // A+B = List(1, 2, 3, 4, 4, 3, 6)
// 相当于
List(1,2,3,4) ++ List(4,3,6) // A+B = List(1, 2, 3, 4, 4, 3, 6)
val a = Array(100,200,300) // a(0)=100, a(1)=200, a(3)=300
a(0) // 100, 相当于a.apply(0)
val t1 = ("a","b","c") // t1._1="a", t1._2="b", t1._3="c"
List(1,2,3).zip(List(100,200,300)).toMap</p>
        </div>
        <!-- /.entry-content -->
                        </article>
</section>
</div>
<div class="col-lg-3 well well-sm" id="sidebar"><aside>
    <section>
        <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                <h4> <i class="icon-home icon-large"></i>
                    Social
                </h4>
            </li>
                        <li class="list-group-item">
                <a href="https://github.com/askender"> <i class="icon-github icon-large"></i>
                    github
                </a>
            </li>
                        <li class="list-group-item">
                <a href="https://twitter.com/askenderlee"> <i class="icon-twitter icon-large"></i>
                    twitter
                </a>
            </li>
                        <li class="list-group-item">
                <a href="mailto:askender@gmail.com"> <i class="icon-envelope icon-large"></i>
                    envelope
                </a>
            </li>
                        <li class="list-group-item">
                <a href="/blog/feeds/all.atom.xml"> <i class="icon-rss icon-large"></i>
                    rss
                </a>
            </li>
                        
            
                                                                                                            <li class="list-group-item">
                <a href="/blog/tags.html">
                    <h4>
                        <i class="icon-tags icon-large"></i>
                        Tags
                    </h4>
                </a>
            </li>
                        <li class="list-group-item tag-1">
                <a href="/blog/tag/log.html">log</a>
            </li>
                        <li class="list-group-item tag-1">
                <a href="/blog/tag/list.html">list</a>
            </li>
                        <li class="list-group-item tag-1">
                <a href="/blog/tag/anwen.html">anwen</a>
            </li>
                        <li class="list-group-item tag-2">
                <a href="/blog/tag/sayings.html">sayings</a>
            </li>
                        <li class="list-group-item tag-3">
                <a href="/blog/tag/coding.html">coding</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/sf.html">sf</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/write.html">write</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/pelican.html">pelican</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/study.html">study</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/ande.html">ande</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/music.html">music</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/design.html">design</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/aim.html">aim</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/info.html">info</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/bitcoin.html">bitcoin</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/res.html">res</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/bash.html">bash</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/mandela.html">mandela</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/ai.html">AI</a>
            </li>
                        <li class="list-group-item tag-4">
                <a href="/blog/tag/tech.html">tech</a>
            </li>
                    </ul>
    </section>
    </aside></div>
</div>
</div>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/blog/theme/js/jquery.min.js"></script>
<script src="/blog/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/blog/theme/js/respond.min.js"></script>
</body>
</html>